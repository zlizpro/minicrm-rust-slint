# MiniCRM Rust + Slint 需求文档

## 介绍

MiniCRM是一个专为板材行业设计的跨平台客户关系管理应用程序。该系统使用Rust作为后端开发语言和Slint作为现代化GUI框架，能够在macOS和Windows平台上运行，帮助用户管理客户信息、跟踪互动记录、管理任务和维护业务关系。

### 技术选型要求

- **后端语言**：使用Rust确保内存安全、高性能和并发处理能力
- **GUI框架**：使用Slint提供现代化、响应式的跨平台用户界面
- **架构设计**：基于模块化架构，使用Rust的trait系统实现代码复用
- **代码质量**：严格的类型安全、错误处理和单元测试覆盖
- **数据存储**：采用SQLite + rusqlite实现轻量级本地数据持久化
- **部署方案**：通过cargo构建系统生成原生可执行程序
- **界面设计**：现代化Slint界面，支持主题切换和高DPI显示

## 需求

### 需求 1 - 客户信息管理

**用户故事：** 作为用户，我希望能够添加、编辑和删除客户信息，以便有效管理我的客户数据库。

#### 验收标准

1. 当用户点击"添加客户"按钮时，系统应显示客户信息输入表单
2. 当用户填写必填字段（姓名、联系方式）并点击保存时，系统应将客户信息存储到数据库
3. 当用户在客户列表中选择客户并点击"编辑"时，系统应显示预填充的编辑表单
4. 当用户在客户列表中选择客户并点击"删除"时，系统应显示确认对话框并在确认后删除客户
5. 如果用户尝试保存不完整的客户信息时，系统应显示验证错误消息

### 需求 2 - 客户搜索和筛选

**用户故事：** 作为用户，我希望能够快速搜索和筛选客户，以便快速找到特定的客户信息。

#### 验收标准

1. 当用户在搜索框中输入关键词时，系统应实时筛选显示匹配的客户
2. 当用户选择筛选条件（如客户类型、地区、购买产品类别）时，系统应根据条件筛选客户列表
3. 当用户清空搜索条件时，系统应显示所有客户
4. 如果搜索结果为空时，系统应显示"未找到匹配客户"的提示信息

### 需求 3 - 互动记录管理

**用户故事：** 作为用户，我希望能够记录与客户的互动历史，以便跟踪业务关系的发展。

#### 验收标准

1. 当用户选择客户并点击"添加互动记录"时，系统应显示互动记录输入表单
2. 当用户填写互动内容、日期和类型并保存时，系统应将记录关联到对应客户
3. 当用户查看客户详情时，系统应以时间线视图按时间顺序显示所有互动记录
4. 当用户点击互动记录时，系统应显示记录的详细信息
5. 如果用户尝试保存空的互动记录时，系统应显示验证错误
### 需求 4 - 日程跟踪和提醒管理

**用户故事：** 作为用户，我希望能够创建与客户相关的任务和提醒，以便及时跟进重要事项。

#### 验收标准

1. 当用户点击"创建任务"时，系统应显示任务创建表单
2. 当用户设置任务标题、截止日期和关联客户并保存时，系统应创建任务
3. 当任务截止日期临近时，系统应在启动时显示提醒功能通知
4. 当用户完成任务时，系统应允许标记任务为已完成
5. 如果用户设置的截止日期早于当前日期时，系统应显示警告信息

### 需求 5 - 数据导入导出

**用户故事：** 作为用户，我希望能够导入现有数据和导出各种格式的文档，以便数据迁移、备份和文档管理。

#### 验收标准

1. 当用户选择"导入数据"并选择CSV/Excel文件时，系统应解析并导入客户、合同等数据
2. 当用户点击"导出数据"时，系统应支持生成CSV、Excel格式的数据文件
3. 当用户导出Word文档时，系统应支持合同、报价单等业务文档的Word格式导出
4. 当导入数据格式不正确时，系统应显示错误信息并指出问题所在
5. 当导出完成时，系统应显示成功消息并提示文件保存位置
6. 如果导入过程中发现重复数据时，系统应询问用户如何处理

### 需求 6 - 跨平台兼容性

**用户故事：** 作为用户，我希望程序能在macOS和Windows上正常运行，以便在不同设备上使用。

#### 验收标准

1. 当程序在macOS上启动时，系统应正确显示界面并响应用户操作
2. 当程序在Windows上启动时，系统应正确显示界面并响应用户操作
3. 当用户在不同平台间切换使用时，数据文件应保持兼容性
4. 当程序在不同平台上运行时，界面元素应遵循各平台的设计规范
5. 如果程序在某个平台上遇到兼容性问题时，系统应提供清晰的错误信息

### 需求 7 - 数据安全和备份

**用户故事：** 作为用户，我希望我的客户数据是安全的并且有备份机制，以便保护重要的业务信息。

#### 验收标准

1. 当程序启动时，系统应检查数据库文件的完整性
2. 当用户进行重要操作（如删除客户）时，系统应自动创建数据备份
3. 当数据文件损坏时，系统应尝试从最近的备份恢复数据
4. 当用户手动触发备份时，系统应创建完整的数据备份文件
5. 如果备份操作失败时，系统应通知用户并提供解决建议

### 需求 8 - 数据库结构设计

**用户故事：** 作为开发者，我需要设计合理的SQLite数据库结构，以便高效存储和查询客户相关数据。

#### 验收标准

1. 当系统初始化时，系统应创建包含客户、互动记录、任务等核心表的数据库结构
2. 当客户数据存储时，系统应确保数据完整性和关联关系的正确性
3. 当进行数据查询时，系统应通过合理的索引设计保证查询效率
4. 当数据库版本升级时，系统应提供数据迁移机制
5. 如果数据库操作失败时，系统应提供详细的错误信息和恢复建议#
## 需求 9 - 用户界面优化

**用户故事：** 作为用户，我希望界面简洁直观且交互高效，以便快速完成日常CRM操作。

#### 验收标准

1. 当程序启动时，系统应显示优化的联系人列表作为主界面
2. 当用户进行常用操作时，系统应提供快捷键和右键菜单支持
3. 当界面元素过多时，系统应使用标签页或折叠面板组织内容
4. 当用户调整窗口大小时，系统应保持界面元素的合理布局
5. 如果操作响应时间超过预期时，系统应显示进度指示器

### 需求 10 - 数据仪表盘

**用户故事：** 作为用户，我希望程序启动时能看到量化数据的仪表盘，以便快速了解我的客户管理状况和业务概览。

#### 验收标准

1. 当程序启动时，系统应在主界面显示数据仪表盘作为首页
2. 当仪表盘加载时，系统应显示客户总数、本月新增客户数、待办任务数等关键指标卡片
3. 当用户查看仪表盘时，系统应显示动态图表包括：客户增长趋势线图、客户类型分布饼图、月度互动频率柱状图、应收账款状态图、售后原因分类统计图、报价成功率分析图、合同状态分布图、交流事件处理状态图、产品客户分布图、供应商分布图、应付账款状态图、供应商质量评级图
4. 当底层数据发生变化时，系统应自动更新所有图表和统计数字
5. 当用户点击图表区域时，系统应显示该数据点的详细信息
6. 如果某项统计数据为零时，系统应显示友好的提示信息引导用户开始使用相关功能

### 需求 11 - 产品售后跟踪

**用户故事：** 作为用户，我希望能够跟踪销售给客户的产品和相关的售后服务，并对售后原因进行分类分析，以便提供更好的客户支持和产品质量改进。

#### 验收标准

1. 当用户为客户添加产品销售记录时，系统应记录产品信息、销售日期、价格和保修期等详细信息
2. 当产品保修期临近结束时，系统应在仪表盘和提醒中显示预警信息
3. 当客户联系售后服务时，系统应显示该客户的所有产品购买历史和之前的售后记录
4. 当用户添加售后服务记录时，系统应选择售后问题分类（开胶、崩边、起皮、起皱、变型等）和售后方式（赔板、赔款、退货等），并关联到具体产品和客户
5. 当用户查看售后分析报告时，系统应按产品型号、售后原因、时间段等维度显示售后统计图表
6. 当系统生成售后趋势分析时，系统应识别高频售后问题并提供改进建议
7. 当用户查看产品质量报告时，系统应显示各产品的故障率、平均故障时间和客户满意度
8. 如果某产品的售后率异常高时，系统应在仪表盘显示产品质量预警
9. 如果产品信息不完整时，系统应提示用户补充必要的产品详情

### 需求 12 - 货款授信和收款管理

**用户故事：** 作为用户，我希望能够管理客户的授信额度和收款情况，以便控制财务风险和及时回收货款。

#### 验收标准

1. 当用户为客户设置授信额度时，系统应记录授信金额、授信期限和审批日期
2. 当客户的未收款金额接近或超过授信额度时，系统应显示风险警告
3. 当用户记录销售订单时，系统应自动计算并更新客户的应收账款余额
4. 当用户记录收款时，系统应更新客户的收款记录和剩余应收金额
5. 当收款逾期时，系统应在仪表盘显示逾期客户列表和逾期金额
6. 当用户查看财务报表时，系统应显示总应收账款、逾期账款和授信使用率等关键指标
7. 如果收款金额超过应收金额时，系统应显示确认对话框防止录入错误### 
需求 13 - 产品报价管理

**用户故事：** 作为用户，我希望能够为客户创建产品报价并跟踪报价历史，以便进行价格比对和优化报价策略。

#### 验收标准

1. 当用户为客户创建报价时，系统应记录产品清单、单价、数量、总价和报价有效期
2. 当用户查看客户的报价历史时，系统应按时间顺序显示所有历史报价记录
3. 当用户进行报价比对时，系统应并排显示同一客户的不同报价，突出显示价格差异
4. 当用户创建新报价时，系统应提供基于历史报价的快速复制和修改功能
5. 当报价即将过期时，系统应在提醒模块中显示过期预警
6. 当用户生成报价单时，系统应支持导出为PDF格式的正式报价文档
7. 当用户查看报价统计时，系统应显示报价成功率、平均报价金额等分析数据
8. 如果报价中的产品价格异常（过高或过低）时，系统应显示价格合理性提醒

### 需求 14 - 合同管理

**用户故事：** 作为用户，我希望能够管理与客户签署的合同，并支持各种文档格式的导出和模板功能，以便规范化合同管理流程。

#### 验收标准

1. 当用户创建合同时，系统应记录合同编号、客户信息、合同金额、签署日期、生效日期和到期日期
2. 当用户查看合同列表时，系统应显示合同状态（草稿、已签署、执行中、已完成、已终止）
3. 当合同即将到期时，系统应在提醒模块和仪表盘中显示到期预警
4. 当用户选择合同模板时，系统应提供预设的合同模板供快速创建
5. 当用户导出合同时，系统应支持生成Word文档格式的正式合同文件
6. 当用户导出数据报表时，系统应支持Excel格式的合同汇总表和统计报表
7. 当用户自定义模板时，系统应允许保存和管理个人合同模板
8. 当合同关联报价时，系统应自动填充相关的产品和价格信息
9. 如果合同信息不完整时，系统应提示用户补充必要的合同条款和细节

### 需求 15 - 客户交流事件跟踪处理

**用户故事：** 作为用户，我希望能够系统化地跟踪和处理与客户的各种交流事件，以便确保及时响应客户需求并维护良好的客户关系。

#### 验收标准

1. 当客户发起交流时，系统应记录交流事件的类型（咨询、投诉、建议、售后等）、紧急程度和详细内容
2. 当用户创建交流事件时，系统应自动分配事件编号并设置处理状态（待处理、处理中、已完成、已关闭）
3. 当交流事件被分配处理时间时，系统应根据紧急程度和事件类型设置提醒和跟进计划
4. 当用户更新事件处理进度时，系统应记录处理过程、采取的行动和当前状态
5. 当事件处理超时时，系统应在仪表盘和提醒中显示超时预警
6. 当事件完成处理时，系统应记录解决方案、客户满意度和事件关闭时间
7. 当用户查看交流事件统计时，系统应显示事件类型分布、平均处理时间、客户满意度等分析数据
8. 当相似事件重复出现时，系统应提供历史解决方案的参考建议
9. 如果事件信息不完整或处理方式不当时，系统应提供改进建议和最佳实践提示

### 需求 16 - 客户分级管理

**用户故事：** 作为用户，我希望能够对客户进行分级管理，以便根据客户价值和重要性制定差异化的服务策略和资源分配。

#### 验收标准

1. 当用户为客户设置等级时，系统应提供预设的客户等级（VIP客户、重要客户、普通客户、潜在客户）和自定义等级选项
2. 当用户查看客户列表时，系统应通过颜色标识、图标或标签清晰显示客户等级
3. 当用户按客户等级筛选时，系统应快速显示对应等级的客户列表
4. 当系统自动评估客户等级时，系统应基于交易金额、交易频率、合作时长等指标提供等级建议
5. 当高等级客户有新的交流事件或任务时，系统应在提醒中给予更高的优先级显示
6. 当用户查看客户等级分析时，系统应显示各等级客户的数量分布、贡献度分析和价值统计
7. 当客户等级发生变化时，系统应记录等级变更历史和变更原因
8. 当用户设置等级权限时，系统应支持为不同等级客户设置不同的授信额度和服务标准
9. 如果客户长期无交易或互动时，系统应提示考虑调整客户等级#
## 需求 17 - 产品客户分类管理

**用户故事：** 作为用户，我希望能够根据客户购买的产品类别对客户进行分类管理，以便针对不同产品线制定精准的营销策略和客户服务方案。

#### 验收标准

1. 当用户为客户添加产品购买记录时，系统应自动将客户归类到对应的产品客户群体
2. 当用户查看产品客户分布时，系统应显示各产品类别的客户数量、购买金额和活跃度统计
3. 当用户按产品类别筛选客户时，系统应显示购买过该类产品的所有客户列表
4. 当用户分析产品客户特征时，系统应提供客户画像分析，包括地域分布、购买偏好、消费能力等
5. 当用户制定产品营销计划时，系统应支持按产品类别批量选择目标客户群体
6. 当新产品上市时，系统应基于客户历史购买记录推荐潜在目标客户
7. 当用户查看产品客户交叉分析时，系统应显示客户跨产品购买行为和产品关联性分析
8. 当某产品客户流失率异常时，系统应在仪表盘显示客户流失预警
9. 如果客户长期只购买单一产品时，系统应提示交叉销售机会

## 供应商管理需求

### 需求 18 - 供应商信息管理

**用户故事：** 作为用户，我希望能够添加、编辑和删除供应商信息，以便有效管理我的供应商数据库。

#### 验收标准

1. 当用户点击"添加供应商"按钮时，系统应显示供应商信息输入表单
2. 当用户填写必填字段（供应商名称、联系方式）并点击保存时，系统应将供应商信息存储到数据库
3. 当用户在供应商列表中选择供应商并点击"编辑"时，系统应显示预填充的编辑表单
4. 当用户在供应商列表中选择供应商并点击"删除"时，系统应显示确认对话框并在确认后删除供应商
5. 如果用户尝试保存不完整的供应商信息时，系统应显示验证错误消息

### 需求 19 - 供应商搜索和筛选

**用户故事：** 作为用户，我希望能够快速搜索和筛选供应商，以便快速找到特定的供应商信息。

#### 验收标准

1. 当用户在搜索框中输入关键词时，系统应实时筛选显示匹配的供应商
2. 当用户选择筛选条件（如供应商类型、地区、供应产品类别）时，系统应根据条件筛选供应商列表
3. 当用户清空搜索条件时，系统应显示所有供应商
4. 如果搜索结果为空时，系统应显示"未找到匹配供应商"的提示信息

### 需求 20 - 供应商互动记录管理

**用户故事：** 作为用户，我希望能够记录与供应商的互动历史，以便跟踪合作关系的发展。

#### 验收标准

1. 当用户选择供应商并点击"添加互动记录"时，系统应显示互动记录输入表单
2. 当用户填写互动内容、日期和类型并保存时，系统应将记录关联到对应供应商
3. 当用户查看供应商详情时，系统应以时间线视图按时间顺序显示所有互动记录
4. 当用户点击互动记录时，系统应显示记录的详细信息
5. 如果用户尝试保存空的互动记录时，系统应显示验证错误### 需
求 21 - 供应商任务和提醒管理

**用户故事：** 作为用户，我希望能够创建与供应商相关的任务和提醒，以便及时跟进重要采购事项。

#### 验收标准

1. 当用户点击"创建供应商任务"时，系统应显示任务创建表单
2. 当用户设置任务标题、截止日期和关联供应商并保存时，系统应创建任务
3. 当任务截止日期临近时，系统应在启动时显示提醒功能通知
4. 当用户完成任务时，系统应允许标记任务为已完成
5. 如果用户设置的截止日期早于当前日期时，系统应显示警告信息

### 需求 22 - 供应商产品和服务跟踪

**用户故事：** 作为用户，我希望能够跟踪从供应商采购的产品和服务质量，以便评估供应商表现和优化采购决策。

#### 验收标准

1. 当用户记录供应商产品采购时，系统应记录产品信息、采购日期、价格和质量评级等详细信息
2. 当产品质量出现问题时，系统应记录问题分类（质量问题、交期问题、服务问题、价格问题等）并关联到具体供应商
3. 当用户查看供应商质量分析时，系统应按供应商、产品类型、问题类型等维度显示质量统计图表
4. 当系统生成供应商评估报告时，系统应显示各供应商的质量评分、交期准确率和服务满意度
5. 如果某供应商的问题率异常高时，系统应在仪表盘显示供应商质量预警
6. 如果供应商信息不完整时，系统应提示用户补充必要的供应商详情

### 需求 23 - 供应商付款和账期管理

**用户故事：** 作为用户，我希望能够管理供应商的付款情况和账期，以便控制现金流和维护良好的供应商关系。

#### 验收标准

1. 当用户记录采购订单时，系统应自动计算并更新供应商的应付账款余额
2. 当用户记录付款时，系统应更新供应商的付款记录和剩余应付金额
3. 当付款即将到期时，系统应在仪表盘显示待付款供应商列表和到期金额
4. 当用户查看财务报表时，系统应显示总应付账款、逾期账款和现金流预测等关键指标
5. 当用户为供应商设置账期时，系统应记录账期天数和付款条件
6. 如果付款金额超过应付金额时，系统应显示确认对话框防止录入错误
7. 如果付款逾期时，系统应显示逾期预警并记录逾期天数

### 需求 24 - 供应商询价和比价管理

**用户故事：** 作为用户，我希望能够向供应商询价并进行比价分析，以便获得最优的采购方案。

#### 验收标准

1. 当用户创建询价单时，系统应记录产品清单、数量要求、交期要求和技术规格
2. 当用户收到供应商报价时，系统应记录报价价格、交期承诺和报价有效期
3. 当用户进行比价分析时，系统应并排显示多个供应商的报价，突出显示价格和条件差异
4. 当用户生成询价单时，系统应支持导出为PDF格式的正式询价文档
5. 当报价即将过期时，系统应在提醒模块中显示过期预警
6. 当用户查看采购统计时，系统应显示平均采购价格、价格趋势等分析数据
7. 如果报价中的产品价格异常（过高或过低）时，系统应显示价格合理性提醒
8. 当用户基于历史询价创建新询价时，系统应提供快速复制和修改功能#
## 需求 25 - 供应商合同管理

**用户故事：** 作为用户，我希望能够管理与供应商签署的采购合同，并支持各种文档格式的导出和模板功能。

#### 验收标准

1. 当用户创建采购合同时，系统应记录合同编号、供应商信息、合同金额、签署日期、生效日期和到期日期
2. 当用户查看合同列表时，系统应显示合同状态（草稿、已签署、执行中、已完成、已终止）
3. 当合同即将到期时，系统应在提醒模块和仪表盘中显示到期预警
4. 当用户选择合同模板时，系统应提供预设的采购合同模板供快速创建
5. 当用户导出合同时，系统应支持生成Word文档格式的正式合同文件
6. 当用户自定义模板时，系统应允许保存和管理个人采购合同模板
7. 当合同关联询价时，系统应自动填充相关的产品和价格信息
8. 如果合同信息不完整时，系统应提示用户补充必要的合同条款和细节

### 需求 26 - 供应商交流事件跟踪处理

**用户故事：** 作为用户，我希望能够系统化地跟踪和处理与供应商的各种交流事件，以便确保及时响应供应商需求并维护良好的合作关系。

#### 验收标准

1. 当供应商发起交流时，系统应记录交流事件的类型（询价、投诉、建议、质量问题等）、紧急程度和详细内容
2. 当用户创建交流事件时，系统应自动分配事件编号并设置处理状态（待处理、处理中、已完成、已关闭）
3. 当交流事件被分配处理时间时，系统应根据紧急程度和事件类型设置提醒和跟进计划
4. 当用户更新事件处理进度时，系统应记录处理过程、采取的行动和当前状态
5. 当事件处理超时时，系统应在仪表盘和提醒中显示超时预警
6. 当事件完成处理时，系统应记录解决方案、供应商满意度和事件关闭时间
7. 当用户查看交流事件统计时，系统应显示事件类型分布、平均处理时间、供应商满意度等分析数据
8. 当相似事件重复出现时，系统应提供历史解决方案的参考建议

### 需求 27 - 供应商分级管理

**用户故事：** 作为用户，我希望能够对供应商进行分级管理，以便根据供应商重要性和表现制定差异化的合作策略。

#### 验收标准

1. 当用户为供应商设置等级时，系统应提供预设的供应商等级（战略供应商、重要供应商、普通供应商、备选供应商）和自定义等级选项
2. 当用户查看供应商列表时，系统应通过颜色标识、图标或标签清晰显示供应商等级
3. 当用户按供应商等级筛选时，系统应快速显示对应等级的供应商列表
4. 当系统自动评估供应商等级时，系统应基于采购金额、质量表现、交期准确率等指标提供等级建议
5. 当高等级供应商有新的交流事件或任务时，系统应在提醒中给予更高的优先级显示
6. 当用户查看供应商等级分析时，系统应显示各等级供应商的数量分布、贡献度分析和表现统计
7. 当供应商等级发生变化时，系统应记录等级变更历史和变更原因
8. 当用户设置等级权限时，系统应支持为不同等级供应商设置不同的账期和合作条件

### 需求 28 - 供应商产品分类管理

**用户故事：** 作为用户，我希望能够根据供应商提供的产品类别对供应商进行分类管理，以便针对不同产品线制定精准的采购策略。

#### 验收标准

1. 当用户为供应商添加产品供应记录时，系统应自动将供应商归类到对应的产品供应商群体
2. 当用户查看产品供应商分布时，系统应显示各产品类别的供应商数量、供应金额和质量统计
3. 当用户按产品类别筛选供应商时，系统应显示能够供应该类产品的所有供应商列表
4. 当用户分析产品供应商特征时，系统应提供供应商画像分析，包括地域分布、价格水平、质量等级等
5. 当用户制定采购计划时，系统应支持按产品类别批量选择合适的供应商群体
6. 当新产品需要采购时，系统应基于供应商历史供应记录推荐合适的供应商
7. 当用户查看产品供应商交叉分析时，系统应显示供应商跨产品供应能力和产品关联性分析
8. 当某产品供应商质量异常时，系统应在仪表盘显示供应商质量预警
9. 如果供应商长期只供应单一产品时，系统应提示扩大合作范围的机会

### 需求 29 - 自定义字段管理

**用户故事：** 作为用户，我希望能够自定义售后问题分类和售后方式等业务字段，以便系统适应不同的业务场景和行业特点。

#### 验收标准

1. 当用户进入系统设置时，系统应提供自定义字段管理功能
2. 当用户管理售后问题分类时，系统应支持添加、编辑、删除问题类型（如开胶、崩边、起皮、起皱、变型等）
3. 当用户管理售后方式时，系统应支持添加、编辑、删除处理方式（如赔板、赔款、退货等）
4. 当用户修改自定义字段时，系统应自动更新相关的下拉选项和统计图表
5. 当删除已使用的字段值时，系统应显示确认对话框并提供数据迁移选项
6. 当用户导出数据时，系统应包含自定义字段的完整信息
7. 如果自定义字段为空时，系统应提供默认的行业标准选项
8. 当系统升级时，用户的自定义字段配置应得到保留