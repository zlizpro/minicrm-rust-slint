{
  "name": "æµ‹è¯•è¦†ç›–ç‡ç›‘æ§",
  "description": "ä»£ç å˜æ›´åè‡ªåŠ¨è¿è¡Œç›¸å…³æµ‹è¯•å¹¶ç›‘æ§è¦†ç›–ç‡å˜åŒ–",
  "trigger": {
    "type": "file_change",
    "patterns": ["**/*.rs", "**/*.swift", "**/*.py", "**/*.ts", "**/*.js"],
    "exclude_patterns": ["**/tests/**", "**/*_test.*", "**/*.test.*"]
  },
  "actions": [
    {
      "name": "è¯†åˆ«å˜æ›´å½±å“",
      "type": "impact_analysis",
      "script": "åˆ†æä»£ç å˜æ›´å½±å“çš„æ¨¡å—å’Œæµ‹è¯•"
    },
    {
      "name": "è¿è¡Œç›¸å…³æµ‹è¯•",
      "type": "selective_testing",
      "actions": [
        {
          "name": "Rustå¢é‡æµ‹è¯•",
          "condition": "has_rust_changes",
          "command": "cargo test --lib --bins",
          "coverage_command": "cargo tarpaulin --out Html --output-dir coverage/",
          "message": "è¿è¡ŒRustç›¸å…³æµ‹è¯•..."
        },
        {
          "name": "Swiftå¢é‡æµ‹è¯•", 
          "condition": "has_swift_changes",
          "command": "swift test --enable-code-coverage",
          "coverage_command": "xcrun llvm-cov show .build/debug/PackageTests.xctest/Contents/MacOS/PackageTests",
          "message": "è¿è¡ŒSwiftç›¸å…³æµ‹è¯•..."
        },
        {
          "name": "Pythonå¢é‡æµ‹è¯•",
          "condition": "has_python_changes",
          "command": "pytest --cov=. --cov-report=html --cov-report=term-missing",
          "message": "è¿è¡ŒPythonç›¸å…³æµ‹è¯•..."
        },
        {
          "name": "TypeScriptå¢é‡æµ‹è¯•",
          "condition": "has_ts_changes",
          "command": "npm test -- --coverage --watchAll=false",
          "message": "è¿è¡ŒTypeScriptç›¸å…³æµ‹è¯•..."
        }
      ]
    },
    {
      "name": "è¦†ç›–ç‡åˆ†æ",
      "type": "coverage_analysis",
      "thresholds": {
        "line_coverage": {
          "target": 80.0,
          "minimum": 70.0,
          "warning": 75.0
        },
        "branch_coverage": {
          "target": 70.0,
          "minimum": 60.0,
          "warning": 65.0
        },
        "function_coverage": {
          "target": 85.0,
          "minimum": 75.0,
          "warning": 80.0
        }
      }
    },
    {
      "name": "è¦†ç›–ç‡è¶‹åŠ¿åˆ†æ",
      "type": "trend_analysis",
      "actions": [
        {
          "name": "å¯¹æ¯”å†å²è¦†ç›–ç‡",
          "script": "æ¯”è¾ƒå½“å‰è¦†ç›–ç‡ä¸å†å²æ•°æ®"
        },
        {
          "name": "è¯†åˆ«è¦†ç›–ç‡ä¸‹é™",
          "threshold": -5.0,
          "action": "warning"
        },
        {
          "name": "ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š",
          "output": ".kiro/reports/coverage-report.html"
        }
      ]
    },
    {
      "name": "æœªè¦†ç›–ä»£ç åˆ†æ",
      "type": "uncovered_analysis",
      "actions": [
        {
          "name": "è¯†åˆ«å…³é”®æœªè¦†ç›–ä»£ç ",
          "priority": ["error_handling", "business_logic", "public_api"]
        },
        {
          "name": "ç”Ÿæˆæµ‹è¯•å»ºè®®",
          "output": ".kiro/suggestions/test-suggestions.md"
        }
      ]
    }
  ],
  "notifications": {
    "coverage_improved": "ğŸ“ˆ æµ‹è¯•è¦†ç›–ç‡æå‡: {old_coverage}% â†’ {new_coverage}%",
    "coverage_decreased": "ğŸ“‰ æµ‹è¯•è¦†ç›–ç‡ä¸‹é™: {old_coverage}% â†’ {new_coverage}%",
    "coverage_below_threshold": "âš ï¸ æµ‹è¯•è¦†ç›–ç‡ä½äºé˜ˆå€¼: {current_coverage}% < {threshold}%",
    "tests_failed": "âŒ æµ‹è¯•å¤±è´¥: {failed_count} ä¸ªæµ‹è¯•æœªé€šè¿‡"
  },
  "actions_on_low_coverage": [
    {
      "name": "ç”Ÿæˆæµ‹è¯•æ¨¡æ¿",
      "type": "generate_test_templates",
      "output": "tests/generated/"
    },
    {
      "name": "æ ‡è®°éœ€è¦æµ‹è¯•çš„å‡½æ•°",
      "type": "mark_untested_functions"
    }
  ],
  "settings": {
    "run_on_save": false,
    "run_on_commit": true,
    "cache_results": true,
    "timeout": 120
  }
}