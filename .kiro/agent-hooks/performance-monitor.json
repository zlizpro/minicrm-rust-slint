{
  "name": "æ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–",
  "description": "ç›‘æ§æ„å»ºæ€§èƒ½ã€è¿è¡Œæ—¶æ€§èƒ½å’Œä»£ç å¤æ‚åº¦ï¼Œæä¾›ä¼˜åŒ–å»ºè®®",
  "trigger": {
    "type": "multiple",
    "triggers": [
      {
        "type": "file_change",
        "patterns": ["**/*.rs", "**/*.swift", "**/*.py", "**/*.ts"]
      },
      {
        "type": "git_push"
      },
      {
        "type": "scheduled",
        "schedule": "weekly"
      }
    ]
  },
  "actions": [
    {
      "name": "æ„å»ºæ€§èƒ½ç›‘æ§",
      "type": "build_performance",
      "actions": [
        {
          "name": "Rustæ„å»ºæ€§èƒ½",
          "condition": "has_rust_files",
          "commands": [
            "cargo build --timings",
            "cargo bloat --release --crates"
          ],
          "metrics": ["compile_time", "binary_size", "dependency_compile_time"],
          "message": "ç›‘æ§Rustæ„å»ºæ€§èƒ½..."
        },
        {
          "name": "Swiftæ„å»ºæ€§èƒ½",
          "condition": "has_swift_files",
          "commands": [
            "swift build --verbose",
            "swift build -c release"
          ],
          "metrics": ["compile_time", "binary_size"],
          "message": "ç›‘æ§Swiftæ„å»ºæ€§èƒ½..."
        },
        {
          "name": "PythonåŒ…å¤§å°åˆ†æ",
          "condition": "has_python_files",
          "commands": [
            "python setup.py bdist_wheel",
            "wheel unpack dist/*.whl"
          ],
          "metrics": ["package_size", "import_time"],
          "message": "åˆ†æPythonåŒ…æ€§èƒ½..."
        },
        {
          "name": "TypeScriptæ„å»ºæ€§èƒ½",
          "condition": "has_ts_files",
          "commands": [
            "npm run build -- --stats",
            "webpack-bundle-analyzer dist/main.js"
          ],
          "metrics": ["bundle_size", "compile_time", "chunk_sizes"],
          "message": "ç›‘æ§TypeScriptæ„å»ºæ€§èƒ½..."
        }
      ]
    },
    {
      "name": "ä»£ç å¤æ‚åº¦åˆ†æ",
      "type": "complexity_analysis",
      "tools": {
        "rust": "cargo-complexity",
        "swift": "swiftlint --reporter json",
        "python": "radon cc . --json",
        "typescript": "complexity-report"
      },
      "thresholds": {
        "cyclomatic_complexity": 10,
        "cognitive_complexity": 15,
        "maintainability_index": 20
      },
      "actions": [
        {
          "name": "è¯†åˆ«å¤æ‚å‡½æ•°",
          "script": "æ ‡è®°è¶…è¿‡å¤æ‚åº¦é˜ˆå€¼çš„å‡½æ•°"
        },
        {
          "name": "ç”Ÿæˆé‡æ„å»ºè®®",
          "output": ".kiro/suggestions/refactoring-suggestions.md"
        }
      ]
    },
    {
      "name": "å†…å­˜ä½¿ç”¨åˆ†æ",
      "type": "memory_analysis",
      "actions": [
        {
          "name": "Rustå†…å­˜åˆ†æ",
          "condition": "has_rust_files",
          "tools": ["valgrind", "heaptrack"],
          "commands": [
            "cargo test --release",
            "valgrind --tool=massif target/release/main"
          ]
        },
        {
          "name": "Pythonå†…å­˜åˆ†æ",
          "condition": "has_python_files",
          "tools": ["memory_profiler", "pympler"],
          "commands": [
            "python -m memory_profiler main.py",
            "mprof run main.py && mprof plot"
          ]
        }
      ]
    },
    {
      "name": "æ€§èƒ½åŸºå‡†æµ‹è¯•",
      "type": "benchmarking",
      "actions": [
        {
          "name": "RuståŸºå‡†æµ‹è¯•",
          "condition": "has_rust_files",
          "command": "cargo bench",
          "output": "target/criterion/",
          "message": "è¿è¡ŒRuståŸºå‡†æµ‹è¯•..."
        },
        {
          "name": "Swiftæ€§èƒ½æµ‹è¯•",
          "condition": "has_swift_files", 
          "command": "swift test --enable-test-discovery -c release",
          "message": "è¿è¡ŒSwiftæ€§èƒ½æµ‹è¯•..."
        },
        {
          "name": "Pythonæ€§èƒ½æµ‹è¯•",
          "condition": "has_python_files",
          "command": "pytest --benchmark-only",
          "message": "è¿è¡ŒPythonåŸºå‡†æµ‹è¯•..."
        },
        {
          "name": "TypeScriptæ€§èƒ½æµ‹è¯•",
          "condition": "has_ts_files",
          "command": "npm run benchmark",
          "message": "è¿è¡ŒTypeScriptæ€§èƒ½æµ‹è¯•..."
        }
      ]
    },
    {
      "name": "æ€§èƒ½å›å½’æ£€æµ‹",
      "type": "regression_detection",
      "actions": [
        {
          "name": "å¯¹æ¯”å†å²æ€§èƒ½",
          "script": "æ¯”è¾ƒå½“å‰æ€§èƒ½ä¸å†å²åŸºçº¿"
        },
        {
          "name": "è¯†åˆ«æ€§èƒ½å›å½’",
          "thresholds": {
            "build_time_increase": 20,
            "binary_size_increase": 15,
            "benchmark_regression": 10
          }
        },
        {
          "name": "ç”Ÿæˆæ€§èƒ½æŠ¥å‘Š",
          "output": ".kiro/reports/performance-report.html"
        }
      ]
    },
    {
      "name": "ä¼˜åŒ–å»ºè®®ç”Ÿæˆ",
      "type": "optimization_suggestions",
      "categories": [
        {
          "name": "ç¼–è¯‘ä¼˜åŒ–",
          "suggestions": [
            "å¯ç”¨LTOé“¾æ¥æ—¶ä¼˜åŒ–",
            "è°ƒæ•´ä»£ç ç”Ÿæˆå•å…ƒæ•°é‡",
            "ä½¿ç”¨ç›®æ ‡CPUä¼˜åŒ–"
          ]
        },
        {
          "name": "ç®—æ³•ä¼˜åŒ–",
          "suggestions": [
            "ä½¿ç”¨æ›´é«˜æ•ˆçš„æ•°æ®ç»“æ„",
            "å‡å°‘ä¸å¿…è¦çš„å†…å­˜åˆ†é…",
            "ä¼˜åŒ–çƒ­ç‚¹ä»£ç è·¯å¾„"
          ]
        },
        {
          "name": "ä¾èµ–ä¼˜åŒ–",
          "suggestions": [
            "ç§»é™¤æœªä½¿ç”¨çš„ä¾èµ–",
            "ä½¿ç”¨è½»é‡çº§æ›¿ä»£æ–¹æ¡ˆ",
            "å¯ç”¨ä¾èµ–ç‰¹æ€§é—¨æ§"
          ]
        }
      ]
    },
    {
      "name": "æ€§èƒ½ç›‘æ§ä»ªè¡¨æ¿",
      "type": "dashboard_generation",
      "actions": [
        {
          "name": "ç”Ÿæˆæ€§èƒ½å›¾è¡¨",
          "charts": ["build_time_trend", "binary_size_trend", "benchmark_results"]
        },
        {
          "name": "åˆ›å»ºæ€§èƒ½æ‘˜è¦",
          "output": ".kiro/dashboard/performance-summary.html"
        }
      ]
    }
  ],
  "alerts": [
    {
      "condition": "build_time_increase > 50%",
      "action": "immediate_alert",
      "message": "ğŸš¨ æ„å»ºæ—¶é—´æ˜¾è‘—å¢åŠ ï¼Œéœ€è¦ä¼˜åŒ–"
    },
    {
      "condition": "binary_size_increase > 30%",
      "action": "warning",
      "message": "âš ï¸ äºŒè¿›åˆ¶æ–‡ä»¶å¤§å°æ˜¾è‘—å¢åŠ "
    },
    {
      "condition": "benchmark_regression > 20%",
      "action": "block_merge",
      "message": "âŒ æ£€æµ‹åˆ°ä¸¥é‡æ€§èƒ½å›å½’ï¼Œé˜»æ­¢åˆå¹¶"
    }
  ],
  "reports": [
    {
      "name": "æ¯å‘¨æ€§èƒ½æŠ¥å‘Š",
      "output": ".kiro/reports/weekly-performance-report.md",
      "schedule": "weekly"
    },
    {
      "name": "æ€§èƒ½ä¼˜åŒ–å»ºè®®",
      "output": ".kiro/suggestions/performance-optimizations.md",
      "trigger": "on_regression"
    }
  ],
  "settings": {
    "baseline_update_frequency": "monthly",
    "keep_history_days": 90,
    "parallel_benchmarks": true,
    "timeout": 600
  }
}