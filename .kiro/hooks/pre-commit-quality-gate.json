{
  "name": "æäº¤å‰è´¨é‡é—¨ç¦",
  "description": "Gitæäº¤å‰è¿›è¡Œå®Œæ•´çš„ä»£ç è´¨é‡æ£€æŸ¥ï¼Œç¡®ä¿ä»£ç ç¬¦åˆæ‰€æœ‰è´¨é‡æ ‡å‡†",
  "trigger": {
    "type": "git_pre_commit"
  },
  "actions": [
    {
      "name": "é¡¹ç›®ç±»å‹æ£€æµ‹",
      "type": "detect_project",
      "script": "è‡ªåŠ¨æ£€æµ‹é¡¹ç›®æŠ€æœ¯æ ˆå’Œé…ç½®"
    },
    {
      "name": "ä»£ç æ ¼å¼æ£€æŸ¥",
      "type": "format_check",
      "actions": [
        {
          "name": "Rustæ ¼å¼æ£€æŸ¥",
          "condition": "has_rust_files",
          "command": "cargo fmt --check",
          "message": "æ£€æŸ¥Rustä»£ç æ ¼å¼..."
        },
        {
          "name": "Swiftæ ¼å¼æ£€æŸ¥", 
          "condition": "has_swift_files",
          "command": "swift-format lint --recursive Sources/",
          "message": "æ£€æŸ¥Swiftä»£ç æ ¼å¼..."
        },
        {
          "name": "Pythonæ ¼å¼æ£€æŸ¥",
          "condition": "has_python_files", 
          "command": "black --check .",
          "message": "æ£€æŸ¥Pythonä»£ç æ ¼å¼..."
        },
        {
          "name": "TypeScriptæ ¼å¼æ£€æŸ¥",
          "condition": "has_ts_files",
          "command": "prettier --check .",
          "message": "æ£€æŸ¥TypeScriptä»£ç æ ¼å¼..."
        }
      ]
    },
    {
      "name": "é™æ€ä»£ç åˆ†æ",
      "type": "static_analysis",
      "actions": [
        {
          "name": "Rust Clippyæ£€æŸ¥",
          "condition": "has_rust_files",
          "command": "cargo clippy --all-targets -- -D warnings",
          "message": "è¿è¡ŒRusté™æ€åˆ†æ..."
        },
        {
          "name": "Swifté™æ€åˆ†æ",
          "condition": "has_swift_files", 
          "command": "swiftlint",
          "message": "è¿è¡ŒSwifté™æ€åˆ†æ..."
        },
        {
          "name": "Pythoné™æ€åˆ†æ",
          "condition": "has_python_files",
          "commands": [
            "flake8 .",
            "mypy .",
            "bandit -r ."
          ],
          "message": "è¿è¡ŒPythoné™æ€åˆ†æ..."
        },
        {
          "name": "TypeScripté™æ€åˆ†æ",
          "condition": "has_ts_files",
          "command": "eslint . --ext .ts,.tsx,.js,.jsx",
          "message": "è¿è¡ŒTypeScripté™æ€åˆ†æ..."
        }
      ]
    },
    {
      "name": "ä»£ç è´¨é‡åº¦é‡",
      "type": "quality_metrics",
      "checks": [
        {
          "name": "æ–‡ä»¶å¤§å°æ£€æŸ¥",
          "rules": {
            "rust_max_lines": 500,
            "swift_max_lines": 400, 
            "python_max_lines": 300,
            "typescript_max_lines": 400
          },
          "message": "æ£€æŸ¥æ–‡ä»¶å¤§å°é™åˆ¶..."
        },
        {
          "name": "å‡½æ•°å¤æ‚åº¦æ£€æŸ¥",
          "max_cyclomatic_complexity": 10,
          "max_function_length": 50,
          "max_nesting_depth": 4,
          "message": "æ£€æŸ¥å‡½æ•°å¤æ‚åº¦..."
        },
        {
          "name": "é‡å¤ä»£ç æ£€æŸ¥",
          "tools": {
            "rust": "cargo-duplicates",
            "swift": "periphery", 
            "python": "pylint --disable=all --enable=duplicate-code",
            "typescript": "jscpd"
          },
          "thresholds": {
            "min_duplicate_lines": 6,
            "similarity_threshold": 0.8
          },
          "message": "æ£€æŸ¥é‡å¤ä»£ç ..."
        }
      ]
    },
    {
      "name": "æµ‹è¯•æ‰§è¡Œ",
      "type": "test_execution",
      "actions": [
        {
          "name": "Rustæµ‹è¯•",
          "condition": "has_rust_files",
          "command": "cargo test",
          "message": "è¿è¡ŒRustæµ‹è¯•..."
        },
        {
          "name": "Swiftæµ‹è¯•",
          "condition": "has_swift_files",
          "command": "swift test",
          "message": "è¿è¡ŒSwiftæµ‹è¯•..."
        },
        {
          "name": "Pythonæµ‹è¯•",
          "condition": "has_python_files",
          "command": "pytest --cov=. --cov-report=term-missing",
          "message": "è¿è¡ŒPythonæµ‹è¯•..."
        },
        {
          "name": "TypeScriptæµ‹è¯•",
          "condition": "has_ts_files",
          "command": "npm test",
          "message": "è¿è¡ŒTypeScriptæµ‹è¯•..."
        }
      ]
    },
    {
      "name": "æµ‹è¯•è¦†ç›–ç‡æ£€æŸ¥",
      "type": "coverage_check",
      "requirements": {
        "line_coverage": 80.0,
        "branch_coverage": 70.0
      },
      "message": "æ£€æŸ¥æµ‹è¯•è¦†ç›–ç‡..."
    },
    {
      "name": "ä¾èµ–å®‰å…¨æ£€æŸ¥",
      "type": "security_audit",
      "actions": [
        {
          "name": "Rustå®‰å…¨å®¡è®¡",
          "condition": "has_rust_files",
          "command": "cargo audit",
          "message": "æ£€æŸ¥Rustä¾èµ–å®‰å…¨..."
        },
        {
          "name": "Pythonå®‰å…¨å®¡è®¡",
          "condition": "has_python_files", 
          "command": "safety check",
          "message": "æ£€æŸ¥Pythonä¾èµ–å®‰å…¨..."
        },
        {
          "name": "Node.jså®‰å…¨å®¡è®¡",
          "condition": "has_node_files",
          "command": "npm audit",
          "message": "æ£€æŸ¥Node.jsä¾èµ–å®‰å…¨..."
        }
      ]
    },
    {
      "name": "æ„å»ºéªŒè¯",
      "type": "build_check",
      "actions": [
        {
          "name": "Rustæ„å»ºæ£€æŸ¥",
          "condition": "has_rust_files",
          "command": "cargo build --release",
          "message": "éªŒè¯Rustæ„å»º..."
        },
        {
          "name": "Swiftæ„å»ºæ£€æŸ¥",
          "condition": "has_swift_files",
          "command": "swift build",
          "message": "éªŒè¯Swiftæ„å»º..."
        },
        {
          "name": "TypeScriptæ„å»ºæ£€æŸ¥",
          "condition": "has_ts_files",
          "command": "npm run build",
          "message": "éªŒè¯TypeScriptæ„å»º..."
        }
      ]
    }
  ],
  "failure_actions": [
    {
      "name": "ç”Ÿæˆè´¨é‡æŠ¥å‘Š",
      "type": "generate_report",
      "output": ".kiro/reports/quality-report.md"
    },
    {
      "name": "é˜»æ­¢æäº¤",
      "type": "block_commit",
      "message": "ä»£ç è´¨é‡æ£€æŸ¥å¤±è´¥ï¼Œè¯·ä¿®å¤åé‡æ–°æäº¤"
    }
  ],
  "success_actions": [
    {
      "name": "æ›´æ–°è´¨é‡æŒ‡æ ‡",
      "type": "update_metrics",
      "output": ".kiro/metrics/quality-metrics.json"
    }
  ],
  "notifications": {
    "start": "ğŸ” å¼€å§‹æäº¤å‰è´¨é‡æ£€æŸ¥...",
    "success": "âœ… æ‰€æœ‰è´¨é‡æ£€æŸ¥é€šè¿‡ï¼Œå¯ä»¥æäº¤",
    "failure": "âŒ è´¨é‡æ£€æŸ¥å¤±è´¥ï¼Œè¯·æŸ¥çœ‹æŠ¥å‘Šå¹¶ä¿®å¤é—®é¢˜"
  },
  "settings": {
    "parallel_execution": true,
    "timeout": 300,
    "retry_count": 1
  }
}