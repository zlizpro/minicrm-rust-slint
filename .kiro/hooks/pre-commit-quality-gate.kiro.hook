{
  "enabled": true,
  "name": "提交前质量门禁",
  "description": "Git提交前进行完整的代码质量检查，包括格式检查、代码规范检查和测试执行",
  "version": "1",
  "when": {
    "type": "fileEdited",
    "patterns": [
      ".git/hooks/pre-commit",
      "**/*.rs",
      "**/*.swift",
      "**/*.py",
      "Cargo.toml",
      "Package.swift",
      "requirements.txt"
    ]
  },
  "then": {
    "type": "askAgent",
    "prompt": "检测到代码变更，需要执行提交前质量检查。请运行以下检查流程：\n\n1. 🔍 开始提交前质量检查\n2. 根据项目类型执行相应检查：\n   - Rust项目：cargo fmt --check, cargo clippy --all-targets -- -D warnings, cargo test\n   - Swift项目：swift test\n   - Python项目：black --check ., python -m pytest\n3. 如果所有检查通过，输出\"✅ 所有质量检查通过，可以提交\"\n4. 如果任何检查失败，输出相应的错误信息并阻止提交\n\n请确保代码质量符合标准后再允许提交。"
  }
}